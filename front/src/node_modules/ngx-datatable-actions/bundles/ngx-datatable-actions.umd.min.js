!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/router"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-datatable-actions",["exports","@angular/router","@angular/core","@angular/common"],n):n(t["ngx-datatable-actions"]={},t.ng.router,t.ng.core,t.ng.common)}(this,function(t,n,e,a){"use strict";var o=function(){function t(t){this.router=t,this.visibleColumns=[],this.cacheData=!1,this.allColumns=[]}return t.prototype.ngOnInit=function(){var t,n;if(this.datatable&&this.datatable["ngx-datatable-actions"])this.allColumns=this.datatable["ngx-datatable-actions"];else{var e=function(n){n.visible=!0,n.fixed=!1,a.visibleColumns.forEach(function(t){n.prop===t&&(n.visible=!1)}),a.allColumns.push(n)},a=this;try{for(var o=function l(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}(this.datatable.bodyComponent.columns),i=o.next();!i.done;i=o.next()){e(i.value)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}this.setTableColumn(),!0===this.cacheData&&this.loadCacheData()}},t.prototype.ngAfterViewChecked=function(){this.datatable&&this.datatable["ngx-datatable-actions"]&&(this.allColumns=this.datatable["ngx-datatable-actions"])},t.prototype.toggleVisible=function(t){t.visible=!t.visible,this.setTableColumn()},t.prototype.pinningVisible=function(t){t.fixed=!t.fixed,this.allColumns[this.allColumns.indexOf(t)].frozenLeft=t.fixed,this.setTableColumn()},t.prototype.setTableColumn=function(){var t=this.allColumns.filter(function(t){return t.visible});this.datatable.columns=t,this.datatable["ngx-datatable-actions"]=this.allColumns,!0===this.cacheData&&this.cacheColumn()},t.prototype.loadCacheData=function(){var n=[],e=[],t=sessionStorage.getItem(this.router.url+"|dt");if(null!=t){var a=JSON.parse(t);n=a[0].split(","),e=a[1].split(","),this.allColumns.forEach(function(t){0<n.length&&t.name&&-1===n.indexOf(t.name)&&(t.visible=!1),0<e.length&&-1<e.indexOf(t.name)&&(t.fixed=!0,t.frozenLeft=!0)})}this.setTableColumn()},t.prototype.cacheColumn=function(){var n=[],e=[];if(this.allColumns.filter(function(t){return(t.visible||t.fixed)&&t.name}).forEach(function(t){t.visible&&n.push(t.name),t.fixed&&e.push(t.name)}),n||e){var t=JSON.stringify([n.join(","),e.join(",")]);sessionStorage.setItem(this.router.url+"|dt",t)}else sessionStorage.removeItem(this.router.url+"|dt")},t.decorators=[{type:e.Component,args:[{selector:"app-datatable-actions",template:'\n  <div class="dropdown d-inline">\n    <a href="#" class="btn m-btn m-btn--hover-brand m-btn--icon m-btn--icon-only m-btn--pill"\n      data-toggle="dropdown" aria-expanded="false">\n      <i class="la la-ellipsis-h"></i>\n    </a>\n    <div class="dropdown-menu dropdown-menu-right" x-placement="bottom-end">\n      <ng-container *ngFor="let col of allColumns">\n        <div *ngIf="col.name && col.name!=null && col.name!=\'\'" class="dropdown-item">\n          <a class="m-link" title="可见" (click)="toggleVisible(col)">\n            <i class="la la-check" [ngClass]="{\'m--font-focus\': col[\'visible\'], \'m--font-metal\': !col[\'visible\']}"></i>\n          </a>\n          <a class="m-link" title="固定" (click)="pinningVisible(col)">\n            <i class="la la-thumb-tack" [ngClass]="{\'m--font-focus\': col[\'fixed\'], \'m--font-metal\': !col[\'fixed\']}"></i>\n          </a>\n          <span class="inline">{{col.name}}</span>\n        </div>\n      </ng-container>\n    </div>\n  </div>'}]}],t.ctorParameters=function(){return[{type:n.Router}]},t.propDecorators={datatable:[{type:e.Input}],visibleColumns:[{type:e.Input}],cacheData:[{type:e.Input}]},t}(),i=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.decorators=[{type:e.NgModule,args:[{imports:[a.CommonModule],declarations:[o],exports:[o]}]}],t}();t.NgxDatatableActionsComponent=o,t.NgxDatatableActionsModule=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-datatable-actions.umd.min.js.map