{"version":3,"file":"ngx-datatable-actions.js.map","sources":["ng://ngx-datatable-actions/lib/ngx-datatable-actions.component.ts","ng://ngx-datatable-actions/lib/ngx-datatable-actions.module.ts"],"sourcesContent":["import { Component, OnInit, Input, AfterViewChecked } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-datatable-actions',\n  template: `\n  <div class=\"dropdown d-inline\">\n    <a href=\"#\" class=\"btn m-btn m-btn--hover-brand m-btn--icon m-btn--icon-only m-btn--pill\"\n      data-toggle=\"dropdown\" aria-expanded=\"false\">\n      <i class=\"la la-ellipsis-h\"></i>\n    </a>\n    <div class=\"dropdown-menu dropdown-menu-right\" x-placement=\"bottom-end\">\n      <ng-container *ngFor=\"let col of allColumns\">\n        <div *ngIf=\"col.name && col.name!=null && col.name!=''\" class=\"dropdown-item\">\n          <a class=\"m-link\" title=\"å¯è§\" (click)=\"toggleVisible(col)\">\n            <i class=\"la la-check\" [ngClass]=\"{'m--font-focus': col['visible'], 'm--font-metal': !col['visible']}\"></i>\n          </a>\n          <a class=\"m-link\" title=\"åºå®\" (click)=\"pinningVisible(col)\">\n            <i class=\"la la-thumb-tack\" [ngClass]=\"{'m--font-focus': col['fixed'], 'm--font-metal': !col['fixed']}\"></i>\n          </a>\n          <span class=\"inline\">{{col.name}}</span>\n        </div>\n      </ng-container>\n    </div>\n  </div>`\n})\nexport class NgxDatatableActionsComponent implements OnInit, AfterViewChecked {\n  @Input() datatable: any;\n  @Input() visibleColumns: string[] = [];\n  @Input() cacheData = false;\n\n  allColumns: any[] = [];\n\n  constructor(private router: Router) { }\n\n  ngOnInit() {\n    if (this.datatable && this.datatable['ngx-datatable-actions']) {\n      this.allColumns = this.datatable['ngx-datatable-actions'];\n    } else {\n      for (const col of this.datatable.bodyComponent.columns) {\n        col['visible'] = true;\n        col['fixed'] = false;\n\n        this.visibleColumns.forEach((item) => {\n          if (col.prop === item) {\n            col['visible'] = false;\n          }\n        });\n\n        this.allColumns.push(col);\n      }\n      this.setTableColumn();\n      if (this.cacheData === true) {\n        this.loadCacheData();\n      }\n    }\n  }\n\n  ngAfterViewChecked() {\n    if (this.datatable && this.datatable['ngx-datatable-actions']) {\n      this.allColumns = this.datatable['ngx-datatable-actions'];\n    }\n  }\n\n  toggleVisible(column: any): void {\n    column['visible'] = !column['visible'];\n    this.setTableColumn();\n  }\n\n  pinningVisible(column: any): void {\n    column['fixed'] = !column['fixed'];\n    this.allColumns[this.allColumns.indexOf(column)].frozenLeft = column['fixed'];\n    this.setTableColumn();\n  }\n\n  private setTableColumn() {\n    const columns = this.allColumns.filter(c => {\n      return c['visible'];\n    });\n    this.datatable.columns = columns;\n    this.datatable['ngx-datatable-actions'] = this.allColumns;\n    if (this.cacheData === true) {\n      this.cacheColumn();\n    }\n  }\n\n  private loadCacheData() {\n    let vcns: string[] = [];\n    let fcns: string[] = [];\n    const cache = sessionStorage.getItem(this.router.url + '|dt');\n    if (cache != null) {\n      const colns = JSON.parse(cache);\n      vcns = colns[0].split(',');\n      fcns = colns[1].split(',');\n      this.allColumns.forEach(c => {\n        if (vcns.length > 0 && c.name && vcns.indexOf(c.name) === -1) {\n          c['visible'] = false;\n        }\n        if (fcns.length > 0 && fcns.indexOf(c.name) > -1) {\n          c['fixed'] = true;\n          c.frozenLeft = true;\n        }\n      });\n    }\n    this.setTableColumn();\n  }\n\n  private cacheColumn() {\n    const vcol: string[] = [];\n    const fcol: string[] = [];\n    const columns = this.allColumns.filter(c => {\n      return (c['visible'] || c['fixed']) && c.name;\n    });\n    columns.forEach(c => {\n      if (c['visible']) {\n        vcol.push(c.name);\n      }\n      if (c['fixed']) {\n        fcol.push(c.name);\n      }\n    });\n    if (vcol || fcol) {\n      const value = JSON.stringify([vcol.join(','), fcol.join(',')]);\n      sessionStorage.setItem(this.router.url + '|dt', value);\n    } else {\n      sessionStorage.removeItem(this.router.url + '|dt');\n    }\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxDatatableActionsComponent } from './ngx-datatable-actions.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgxDatatableActionsComponent],\n  exports: [NgxDatatableActionsComponent]\n})\nexport class NgxDatatableActionsModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: NgxDatatableActionsModule\n    };\n  }\n}\n"],"names":[],"mappings":"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"}
